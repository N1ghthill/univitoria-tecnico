# .github/workflows/portal-school-notify.yml
name: Portal Escola Updates
on:
  push:
    branches: [main]

jobs:
  notify-discord:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Embed
        uses: tsickert/discord-webhook@v5.2.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}
          embed: |
            {
              "title": "üè´ Portal Escola - Nova Atualiza√ß√£o",
              "color": 4886754,
              "fields": [
                {
                  "name": "Reposit√≥rio",
                  "value": "${{ github.repository }}",
                  "inline": true
                },
                {
                  "name": "Autor",
                  "value": "${{ github.actor }}",
                  "inline": true
                },
                {
                  "name": "Commit",
                  "value": "${{ github.event.head_commit.message }}"
                }
              ],
              "footer": {
                "text": "Portal Escola T√©cnica ‚Ä¢ $(date +'%d/%m/%Y %H:%M')"
              },
              "url": "https://github.com/${{ github.repository }}/commit/${{ github.sha }}"
            }
